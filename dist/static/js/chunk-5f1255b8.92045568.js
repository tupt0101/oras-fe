(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f1255b8"],{"09f4":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),Math.easeInOutQuad=function(t,e,i,n){return t/=n/2,t<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function s(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function a(t,e,i){var a=o(),l=t-a,r=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=r;var o=Math.easeInOutQuad(c,a,l,e);s(o),c<e?n(t):i&&"function"===typeof i&&i()};u()}},"76fe":function(t,e,i){"use strict";i.d(e,"g",(function(){return s})),i.d(e,"f",(function(){return o})),i.d(e,"e",(function(){return a})),i.d(e,"d",(function(){return l})),i.d(e,"b",(function(){return r})),i.d(e,"h",(function(){return c})),i.d(e,"a",(function(){return u})),i.d(e,"c",(function(){return d}));var n=i("b775");function s(t){return Object(n["a"])({url:"/v1/job-management/open-job-by-creator-id/"+t,method:"get"})}function o(t){return Object(n["a"])({url:"/v1/job-management/jobs-paging?&title="+t.title+"&currency="+t.currency+"&numOfElement="+t.limit+"&page="+t.page+"&sort="+t.sort+"&status="+t.status,method:"get"})}function a(t,e){return Object(n["a"])({url:"/v1/job-management/job-by-creator-id?id="+t+"&title="+e.title+"&currency="+e.currency+"&numOfElement="+e.limit+"&page="+e.page+"&sort="+e.sort+"&status="+e.status,method:"get"})}function l(t){return Object(n["a"])({url:"/v1/job-management/job/"+t,method:"get"})}function r(t,e){return Object(n["a"])({url:"/v1/job-management/job",method:e,data:t})}function c(t){return Object(n["a"])({url:"/v1/job-management/job/"+t+"/publish",method:"put"})}function u(t){return Object(n["a"])({url:"/v1/job-management/job/"+t+"/close",method:"put"})}function d(){return Object(n["a"])({url:"/v1/job-management/categories",method:"get"})}},f267:function(t,e,i){},fa75:function(t,e,i){"use strict";var n=i("f267"),s=i.n(n);s.a},ffdd:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-row",[i("el-col",{attrs:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:24},xl:{span:24}}},[i("div",{staticClass:"title-container"},[i("strong",{staticStyle:{"font-size":"36px"}},[t._v("Job List")]),i("br")])]),i("el-col",{attrs:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:12},xl:{span:12}}},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"250px","margin-right":"10px"},attrs:{placeholder:"Title"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title",e)},expression:"listQuery.title"}}),i("el-select",{staticClass:"filter-item",staticStyle:{width:"130px","margin-right":"10px"},attrs:{placeholder:"Status",clearable:""},on:{change:t.handleFilter},model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}},t._l(t.statusOptions,(function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})})),1),i("el-select",{staticClass:"filter-item",staticStyle:{width:"130px","margin-right":"10px"},attrs:{placeholder:"Currency",clearable:""},on:{change:t.handleFilter},model:{value:t.listQuery.currency,callback:function(e){t.$set(t.listQuery,"currency",e)},expression:"listQuery.currency"}},t._l(t.currencyOptions,(function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})})),1),i("el-button",{staticClass:"filter-item",staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v(" Search ")]),i("router-link",{attrs:{to:"/job/create"}},[i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-edit"}},[t._v(" New ")])],1)],1)])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""},on:{"sort-change":t.sortChange}},[i("el-table-column",{attrs:{align:"center",label:"No.",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.$index+1+(t.listQuery.page-1)*t.listQuery.limit))])]}}])}),i("el-table-column",{attrs:{label:"Title",prop:"title",sortable:"custom",width:"250px","class-name":t.getSortClass("title")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("router-link",{attrs:{to:"/job/candidates/"+n.id}},[i("span",{staticClass:"link-type"},[t._v(t._s(n.title))])])]}}])}),i("el-table-column",{attrs:{label:"Job description","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("span",{staticClass:"link-type",staticStyle:{"white-space":"nowrap",color:"#606266"},on:{click:function(e){return t.viewDetail(n)}}},[t._v(t._s(t.stripHtml(n.description)))])]}}])}),i("el-table-column",{attrs:{label:"Published",prop:"publishDate",sortable:"custom",width:"120px",align:"center","class-name":t.getSortClass("publishDate")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("span",[t._v(t._s(n.applyFrom&&new Date(n.applyFrom).toLocaleDateString("en-GB")))])]}}])}),i("el-table-column",{attrs:{label:"Deadline",prop:"deadline",sortable:"custom",width:"120px",align:"center","class-name":t.getSortClass("deadline")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("span",[t._v(t._s(new Date(n.applyTo).toLocaleDateString("en-GB")))])]}}])}),i("el-table-column",{attrs:{label:"Salary",width:"220px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("span",[t._v(t._s(t._f("currencyFilter")(n.currency))+" "+t._s(t._f("toThousandFilter")(n.salaryFrom))+" - "+t._s(t._f("toThousandFilter")(n.salaryTo)))])]}}])}),i("el-table-column",{attrs:{label:"Status","class-name":"status-col",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("el-tag",{attrs:{type:t._f("statusFilter")(n.status)}},[t._v(" "+t._s(n.status)+" ")])]}}])}),i("el-table-column",{attrs:{align:"center",label:"Actions",width:"150px","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("router-link",{attrs:{to:"/job/edit/"+e.row.id}},[i("el-tooltip",{attrs:{content:"Edit job",placement:"top"}},["Draft"===e.row.status?i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"}}):t._e()],1)],1),i("router-link",{attrs:{to:"/job/reopen/"+e.row.id}},[i("el-tooltip",{attrs:{content:"Reopen job",placement:"top"}},["Closed"===e.row.status?i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-copy-document"}}):t._e()],1)],1),i("el-tooltip",{attrs:{content:"Publish job to recruitment platform",placement:"top"}},["Draft"===e.row.status?i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{loading:t.btnLoading,type:"success",size:"small",icon:"el-icon-upload2"},on:{click:function(i){return t.handlePublishJob(e.row.id)}}}):t._e()],1),i("el-tooltip",{attrs:{content:"Close Job",placement:"top"}},["Published"===e.row.status?i("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-circle-close"},on:{click:function(i){t.confirmDialog=!0,t.rowId=e.row.id}}}):t._e()],1)]}}])})],1),i("el-dialog",{attrs:{title:"Job Detail",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"dataForm",staticStyle:{width:"90%","margin-left":"50px"},attrs:{"label-position":"left","label-width":"70px"}},[i("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"Title:",prop:"title","label-width":"100px"}},[i("span",[t._v(t._s(t.temp.title))])]),i("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"Salary:",prop:"salary","label-width":"100px"}},[i("span",[t._v(t._s(t._f("currencyFilter")(t.temp.currency))+" "+t._s(t._f("toThousandFilter")(t.temp.salaryFrom))+" - "+t._s(t._f("toThousandFilter")(t.temp.salaryTo)))])]),i("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"Vacancies:",prop:"vacancies","label-width":"100px"}},[i("span",[t._v(t._s(t.temp.vacancies))])]),i("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"Created:",prop:"created","label-width":"100px"}},[i("span",[t._v(t._s(new Date(t.temp.createDate).toLocaleString("en-GB")))])]),i("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"Published:",prop:"published","label-width":"100px"}},[i("span",[t._v(t._s(new Date(t.temp.applyFrom).toLocaleString("en-GB")))])]),i("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"Deadline:",prop:"deadline","label-width":"100px"}},[i("span",[t._v(t._s(new Date(t.temp.applyTo).toLocaleString("en-GB")))])]),i("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"Description:",prop:"description","label-width":"100px"}}),i("el-form-item",{staticStyle:{"margin-bottom":"0px","max-height":"320px","overflow-y":"scroll"},attrs:{label:"",prop:"description","label-width":"100px"}},[i("span",{domProps:{innerHTML:t._s(t.temp.description)}})])],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1),i("el-dialog",{attrs:{visible:t.showDialog,width:"33%"},on:{"update:visible":function(e){t.showDialog=e}}},[i("span",{attrs:{slot:"title"},slot:"title"},[i("svg-icon",{attrs:{"class-name":"size-icon","icon-class":t.hasError?"failed":"success"}}),t._v(" "+t._s(t.dialogTitle))],1),i("p",{staticClass:"message",domProps:{innerHTML:t._s(t.message)}})]),i("el-dialog",{attrs:{visible:t.confirmDialog,width:"33%"},on:{"update:visible":function(e){t.confirmDialog=e}}},[i("span",{attrs:{slot:"title"},slot:"title"},[i("svg-icon",{attrs:{"class-name":"size-icon","icon-class":"warning"}}),t._v(" Confirmation")],1),i("p",{staticClass:"message"},[t._v("Do you really want to close this job?")]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.confirmDialog=!1}}},[t._v(" Cancel ")]),i("el-button",{attrs:{type:"danger",loading:t.btnLoading},on:{click:function(e){return t.handleCloseJob(t.rowId)}}},[t._v(" Confirm ")])],1)]),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getJobList}})],1)},s=[],o=i("76fe"),a=i("333d"),l={name:"ArticleList",components:{Pagination:a["a"]},filters:{statusFilter:function(t){var e={Published:"success",Draft:"info",Closed:"danger"};return e[t]}},data:function(){return{list:null,total:0,listLoading:!0,listQuery:{page:1,limit:10,title:"",status:"",currency:"",sort:"-applyFrom"},sortTitleTemp:"descending",sortPublishTemp:"descending",sortDeadlineTemp:"descending",statusOptions:["Draft","Published","Closed"],currencyOptions:["VND","USD","SGD","EUR","JPY","CNY"],message:"",showDialog:!1,rowId:void 0,confirmDialog:!1,btnLoading:!1,hasError:!1,dialogTitle:"",temp:{id:void 0,title:"",salary:0,vacancies:0,created:"",published:"",deadline:"",description:"",status:"published"},dialogFormVisible:!1}},computed:{accountId:function(){return this.$store.state.user.accId},accountRole:function(){return this.$store.state.user.roles[0]}},created:function(){this.getJobList()},methods:{handlePublishJob:function(t){var e=this;this.btnLoading=!0,Object(o["h"])(t).then((function(t){e.$notify({title:"Success",message:"Publish the post successfully",type:"success",duration:2e3}),e.btnLoading=!1,e.getJobList()})).catch((function(t){e.dialogTitle=t.response.data.message,e.hasError=!0,402===t.response.data.status&&(e.message="You have run out of job posts.<br>Please try to select and purchase other packages!"),e.showDialog=!0,e.btnLoading=!1}))},handleCloseJob:function(t){var e=this;this.btnLoading=!0,Object(o["a"])(t).then((function(t){e.$notify({title:"Success",message:"Close the post successfully",type:"success",duration:2e3}),e.confirmDialog=!1,e.btnLoading=!1,e.getJobList()})).catch((function(){e.btnLoading=!1}))},stripHtml:function(t){var e=document.createElement("DIV");return e.innerHTML=t,e.textContent||e.innerText||""},getJobList:function(){var t=this;this.listLoading=!0,"admin"===this.accountRole?Object(o["f"])(this.listQuery).then((function(e){t.list=e.data.data,t.total=e.data.total,t.listLoading=!1})):Object(o["e"])(this.accountId,this.listQuery).then((function(e){t.list=e.data.data,t.total=e.data.total,t.listLoading=!1}))},viewDetail:function(t){this.temp=Object.assign({},t),this.dialogFormVisible=!0},sortChange:function(t){var e=t.prop,i=t.order;"title"===e?("ascending"===this.sortTitleTemp?this.sortTitleTemp="descending":this.sortTitleTemp="ascending",console.log(i,this.sortTitleTemp),this.sortByTitle(this.sortTitleTemp)):"publishDate"===e?("ascending"===this.sortPublishTemp?this.sortPublishTemp="descending":this.sortPublishTemp="ascending",console.log(i,this.sortPublishTemp),this.sortByPublish(this.sortPublishTemp)):"deadline"===e&&("ascending"===this.sortDeadlineTemp?this.sortDeadlineTemp="descending":this.sortDeadlineTemp="ascending",console.log(i,this.sortDeadlineTemp),this.sortByDeadline(this.sortDeadlineTemp))},sortByTitle:function(t){console.log("sortByTitle"),this.listQuery.sort="ascending"===t?"+title":"-title",this.handleFilter()},sortByPublish:function(t){console.log("sortByPublish"),this.listQuery.sort="ascending"===t?"+applyFrom":"-applyFrom",this.handleFilter()},sortByDeadline:function(t){console.log("sortByDeadline"),this.listQuery.sort="ascending"===t?"+applyTo":"-applyTo",this.handleFilter()},handleFilter:function(){this.listQuery.page=1,this.getJobList()},getSortClass:function(t){var e=this.listQuery.sort;return e==="+".concat(t)?"ascending":"descending"}}},r=l,c=(i("fa75"),i("2877")),u=Object(c["a"])(r,n,s,!1,null,"2eddfbee",null);e["default"]=u.exports}}]);